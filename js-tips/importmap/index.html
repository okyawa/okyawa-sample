<!DOCTYPE HTML>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>importmapã§ESModulesã‚’èª­ã¿è¾¼ã‚€</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="author" content="okyawa">
  <meta name="robots" content="noindex">

  <link rel="stylesheet" href="/res/css/presentation.css" />

  <!-- â†“ã‚³ãƒ¼ãƒ‰ã®ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆ -->
  <link rel="stylesheet" href="/res/js/highlight-js/styles/atom-one-light.min.css">
  <script src="/res/js/highlight-js/highlight.min.js"></script>
  <script>
    hljs.highlightAll();
  </script>
  <!-- â†‘ã‚³ãƒ¼ãƒ‰ã®ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆ -->

  <script src="/res/js/presentation/presentation.js"></script>
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      // å…¨ã¦ã®detailsè¦ç´ ã‚’é–‰ã˜ã‚‹
      // closeAllDetails();
      // ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã«ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã®å‹•ä½œã¨ãªã‚‹ãƒ¢ãƒ¼ãƒ‰ã«ã™ã‚‹
      // switchPresentationMode();
    });
  </script>

</head>
<body>
<div id="container">


  <header>
    <h1>importmapã§ESModulesã‚’èª­ã¿è¾¼ã‚€</h1>
  </header>

  <br />

  <section>
    <details open>
      <summary><h2>æ¦‚è¦</h2></summary>

      <ul>
        <li><code>script</code> è¦ç´ ã® <code>type</code> å±æ€§ã« <code>importmap</code> ã‚’æŒ‡å®šã™ã‚‹ã¨ã€ <code>script</code> è¦ç´ ã®æœ¬ä½“ãŒã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒãƒƒãƒ—ã«ãªã‚‹</li>
        <li>ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒãƒƒãƒ—ã¯ã€JavaScript ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹éš›ã«ã€ãƒ–ãƒ©ã‚¦ã‚¶ãŒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æŒ‡å®šå­ã‚’è§£æ±ºã™ã‚‹æ–¹æ³•ã‚’é–‹ç™ºè€…ãŒåˆ¶å¾¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</li>
      </ul>
    </details>
  </section>

  <br />
  <br />

  <section>
    <details open>
      <summary>
        <h2>èª­ã¿è¾¼ã‚€ESModulesã®JavaScriptã‚µãƒ³ãƒ—ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«</h2>
      </summary>

      <ul>
        <li>ESModulesã¯ã€JavaScriptãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€ä»•çµ„ã¿</li>
        <li><code>export</code> ã‚„ <code>import</code> ã‚’ä½¿ã†ã“ã¨ã§ã€ESModulesã«ãªã‚‹</li>
        <li>ESModulesã®å ´åˆã€<code>"use strict;"</code> ã‚’ä»˜ã‘ãŸå ´åˆã¨åŒã˜æŒ™å‹•ã§ã€è‡ªå‹•çš„ã«å³æ ¼ãƒ¢ãƒ¼ãƒ‰ã«ãªã‚‹</li>
      </ul>

      <section>
        <h3>/js-tips/importmap/modules/shapes/square.js</h3>
        <pre><code class="language-js">
          export function appendSquare(selector) {
            document.querySelector(selector)?.append('ğŸŸª');
          }
        </code></pre>
      </section>

      <section>
        <h3>/js-tips/importmap/modules/shapes/circle.js</h3>
        <pre><code class="language-js">
          export function appendCircle(selector) {
            document.querySelector(selector)?.append('ğŸŸ ');
          }
        </code></pre>
      </section>

    </details>
  </section>

  <br />
  <br />

  <section>
    <details open>
      <summary><h2>æ™®é€šã«ESModulesã‚’HTMLã§èª­ã¿è¾¼ã‚€å ´åˆ</h2></summary>

      <ul>
        <li>ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ãŒESModulesã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã«ã¯ã€çµ¶å¯¾çš„ãªURLã‹ç›¸å¯¾çš„ãªURLã®æŒ‡å®šãŒå¿…è¦</li>
      </ul>
      <section>
        <h3>HTML</h3>
        <pre><code class="language-html">
          &lt;script type="module"&gt;
            import { appendSquare } from '/js-tips/importmap/modules/shapes/square.js';
            import { appendCircle } from '/js-tips/importmap/modules/shapes/circle.js';

            appendSquare('#result_01');
            appendCircle('#result_01');
          &lt;/script&gt;
        </code></pre>
      </section>

    </details>
  </section>

  <br />
  <br />

  <section>
    <details open>
      <summary><h2>ãƒ™ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ESModulesã‚’èª­ã¿è¾¼ã‚€</h2></summary>

      <ul>
        <li>ãƒ‘ã‚¹ãŒãªã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ™ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« <i>(bare module)</i> ã¨å‘¼ã°ã‚Œã‚‹</li>
        <li>é€šå¸¸ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ <code>import</code> ã™ã‚‹ã“ã¨ã¯ã§ããªã„</li>
        <li>ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒãƒƒãƒ—ã‚’ä½¿ã£ãŸéš›ã¯ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æŒ‡å®šã§ãƒ™ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹</li>
        <li>ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒãƒƒãƒ—ã® <code>script</code> è¦ç´ ã¯ã€ESModulesã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ <code>script</code> è¦ç´ ã®å‰ã«å®£è¨€ã—ã€å‡¦ç†ã™ã‚‹å¿…è¦ãŒã‚ã‚‹</li>
        <li>ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒãƒƒãƒ—ã§æŒ‡å®šã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ‘ã‚¹æŒ‡å®šã¯ã€çµ¶å¯¾URLã§ã‚‚ <code>/</code> <code>./</code> <code>../</code> ã§å§‹ã¾ã‚‹ç›¸å¯¾URLãƒ‘ã‚¹ã§ã‚‚å¯èƒ½</li>
      </ul>

      <section>
        <h3>HTML</h3>
        <pre><code class="language-html">
          &lt;script type="importmap"&gt;
            {
              "imports": {
                "square": "/js-tips/importmap/modules/shapes/square.js",
                "circle": "/js-tips/importmap/modules/shapes/circle.js"
              }
            }
          &lt;/script&gt;

          &lt;script&gt;
            import { appendSquare } from 'square';
            import { appendCircle } from 'circle';

            appendSquare('#result_01');
            appendCircle('#result_01');
          &lt;/script&gt;
        </code></pre>
      </section>

      <section>
        <h3>å®Ÿè¡Œçµæœ</h3>
        <pre><div id="result_01" style="padding: 8px;"></div></pre>
        <script type="importmap">
          {
            "imports": {
              "square": "/js-tips/importmap/modules/shapes/square.js",
              "circle": "/js-tips/importmap/modules/shapes/circle.js",
              "shapes/": "/js-tips/importmap/modules/shapes/"
            }
          }
        </script>
        <script type="module">
          // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«èª­ã¿è¾¼ã¿
          import { appendSquare } from 'square';
          import { appendCircle } from 'circle';
          // å®Ÿè¡Œ
          appendSquare('#result_01');
          appendCircle('#result_01');
        </script>
      </section>

    </details>
  </section>

  <br />
  <br />

  <section>
    <details open>
      <summary><h2>ãƒ‘ã‚¹æ¥é ­è¾ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã§ESModulesã‚’èª­ã¿è¾¼ã‚€</h2></summary>

      <ul>
        <li>ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æŒ‡å®šå­ã®ãƒãƒƒãƒ—ã‚­ãƒ¼ã¯ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æŒ‡å®šå­ã®ãƒ‘ã‚¹ã®æ¥é ­è¾ (prefix) ã‚’å‰²ã‚Šå½“ã¦ç›´ã™ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½</li>
        <li>ã“ã®å ´åˆã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨å‰²ã‚Šå½“ã¦ã‚‰ã‚ŒãŸãƒ‘ã‚¹ã¯ã€ã©ã¡ã‚‰ã‚‚æœ«å°¾ã«ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ (<code>/</code>) ã‚’ä¿æœ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹</li>
      </ul>

      <section>
        <h3>HTML</h3>
        <pre><code class="language-html">
          &lt;script type="importmap"&gt;
            {
              "imports": {
                "shapes/": "/js-tips/importmap/modules/shapes/"
              }
            }
          &lt;/script&gt;

          &lt;script&gt;
            import { appendSquare } from 'shapes/square.js';
            import { appendCircle } from 'shapes/circle.js';

            appendSquare('#result_02');
            appendCircle('#result_02');
          &lt;/script&gt;
        </code></pre>
      </section>

      <section>
        <h3>å®Ÿè¡Œçµæœ</h3>
        <pre><div id="result_02" style="padding: 8px;"></div></pre>
        <script type="module">
          // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«èª­ã¿è¾¼ã¿
          import { appendSquare } from 'shapes/square.js';
          import { appendCircle } from 'shapes/circle.js';
          // å®Ÿè¡Œ
          appendSquare('#result_02');
          appendCircle('#result_02');
        </script>
      </section>

    </details>
  </section>

  <br />
  <br />

  <section>
    <details open>
      <summary><h2>importmapã®å„ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œçŠ¶æ³</h2></summary>

      <ul>
        <li>å…¨ãƒ¢ãƒ€ãƒ³ãƒ–ãƒ©ã‚¦ã‚¶ã§å¯¾å¿œæ¸ˆã¿</li>
        <li>
          <a href="https://caniuse.com/?search=importmap" target="_blank" ref="nofollow noreferrer noopener">https://caniuse.com/?search=importmap</a>
        </li>
      </ul>

    </details>
  </section>

  <br />
  <br />

</div>
</body>
</html>