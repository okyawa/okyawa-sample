<!DOCTYPE HTML>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>importmapã§ESModulesã‚’èª­ã¿è¾¼ã‚€</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="author" content="okyawa">
  <meta name="robots" content="noindex">

  <style>
    #container {
      max-width: 800px;
      margin: 0 auto;
      padding: 0 16px;
    }
    code {
      padding: 2px 4px;
      background-color: #f5f5f5;
      font-family: monospace;
    }
    summary {
      cursor: pointer;
    }
    @media (hover: hover) {
      summary:hover {
        opacity: 0.8;
      }
    }
    summary :is(h1, h2, h3, h4, h5, h6) {
      display: inline-block;
      vertical-align: middle;
    }
    details section {
      margin: 0 1rem;
    }
  </style>


  <!-- â†“ã‚³ãƒ¼ãƒ‰ã®ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆ -->
  <link rel="stylesheet" href="/res/js/highlight-js/styles/atom-one-light.min.css">
  <script src="/res/js/highlight-js/highlight.min.js"></script>
  <script>
    hljs.highlightAll();
  </script>
  <!-- â†‘ã‚³ãƒ¼ãƒ‰ã®ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆ -->

  <script>
    /**
     * å…¨ã¦ã®detailsè¦ç´ ã‚’é–‰ã˜ã€ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã®ãƒ¢ãƒ¼ãƒ‰ã«ã™ã‚‹
     */
    function switchPresentationMode() {
      const detailsElements = document.querySelectorAll('details');
      detailsElements.forEach((detailsElement) => {
        // detailsã®ä¸­ã§1ã¤ã ã‘ã‚’é–‹ãæŒ‡å®š
        detailsElement.name = 'section';
      });
    }
    /**
     * å…¨ã¦ã®detailsè¦ç´ ã‚’é–‰ã˜ã‚‹
     */
    function closeAllDetails() {
      const detailsElements = document.querySelectorAll('details');
      detailsElements.forEach((detailsElement) => {
        detailsElement.open = false;
      });
    }
    window.addEventListener('DOMContentLoaded', () => {
      // closeAllDetails();
      // switchPresentationMode();
    });
  </script>

</head>
<body>
  <div id="container">


  <header style="margin :128px 0 64px 0;">
    <h1>importmapã§ESModulesã‚’èª­ã¿è¾¼ã‚€</h1>
  </header>

  <br />

  <section>
    <details open>
      <summary><h2>æ¦‚è¦</h2></summary>

      <ul>
        <li><code>script</code> è¦ç´ ã® <code>type</code> å±æ€§ã« <code>importmap</code> ã‚’æŒ‡å®šã™ã‚‹ã¨ã€ <code>script</code> è¦ç´ ã®æœ¬ä½“ãŒã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒãƒƒãƒ—ã«ãªã‚‹</li>
        <li>ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒãƒƒãƒ—ã¯ã€JavaScript ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹éš›ã«ã€ãƒ–ãƒ©ã‚¦ã‚¶ãŒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æŒ‡å®šå­ã‚’è§£æ±ºã™ã‚‹æ–¹æ³•ã‚’é–‹ç™ºè€…ãŒåˆ¶å¾¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</li>
      </ul>
    </details>
  </section>

  <br />
  <br />

  <section>
    <details open>
      <summary>
        <h2>èª­ã¿è¾¼ã‚€ESModulesã®JavaScriptã‚µãƒ³ãƒ—ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«</h2>
      </summary>

      <ul>
        <li>ESModulesã¯ã€JavaScriptãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€ä»•çµ„ã¿</li>
        <li><code>export</code> ã‚„ <code>import</code> ã‚’ä½¿ã†ã“ã¨ã§ã€ESModulesã«ãªã‚‹</li>
        <li>ESModulesã®å ´åˆã€<code>"use strict;"</code> ã‚’ä»˜ã‘ãŸå ´åˆã¨åŒã˜æŒ™å‹•ã§ã€è‡ªå‹•çš„ã«å³æ ¼ãƒ¢ãƒ¼ãƒ‰ã«ãªã‚‹</li>
      </ul>

      <section>
        <h3>/js-tips/importmap/modules/square.js</h3>
        <pre><code class="language-js">
          export function appendSquare() {
            document.querySelector('#result_01')?.append('ğŸŸª');
          }
        </code></pre>
      </section>

      <section>
        <h3>/js-tips/importmap/modules/circle.js</h3>
        <pre><code class="language-js">
          export function appendCircle() {
            document.querySelector('#result_01')?.append('ğŸŸ ');
          }
        </code></pre>
      </section>

    </details>
  </section>

  <br />
  <br />

  <section>
    <details open>
      <summary><h2>æ™®é€šã«ESModulesã‚’HTMLã§èª­ã¿è¾¼ã‚€å ´åˆ</h2></summary>

      <ul>
        <li>ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ãŒESModulesã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã«ã¯ã€çµ¶å¯¾çš„ãªURLã‹ç›¸å¯¾çš„ãªURLã®æŒ‡å®šãŒå¿…è¦</li>
      </ul>
      <section>
        <h3>HTML</h3>
        <pre><code class="language-html">
          &lt;script type="module"&gt;
            import { appendSquare } from '/js-tips/importmap/modules/square.js';
            import { appendCircle } from '/js-tips/importmap/modules/circle.js';

            appendSquare();
            appendCircle();
          &lt;/script&gt;
        </code></pre>
      </section>

    </details>
  </section>

  <br />
  <br />

  <section>
    <details open>
      <summary><h2>ãƒ™ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ‡ãƒ¢</h2></summary>

      <ul>
        <li>ãƒ‘ã‚¹ãŒãªã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ™ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« <i>(bare module)</i> ã¨å‘¼ã°ã‚Œã‚‹</li>
        <li>é€šå¸¸ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ <code>import</code> ã™ã‚‹ã“ã¨ã¯ã§ããªã„</li>
        <li>ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒãƒƒãƒ—ã‚’ä½¿ã£ãŸéš›ã¯ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æŒ‡å®šã§ãƒ™ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹</li>
        <li>ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒãƒƒãƒ—ã® <code>script</code> è¦ç´ ã¯ã€ESModulesã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ <code>script</code> è¦ç´ ã®å‰ã«å®£è¨€ã—ã€å‡¦ç†ã™ã‚‹å¿…è¦ãŒã‚ã‚‹</li>
        <li>ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒãƒƒãƒ—ã§æŒ‡å®šã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ‘ã‚¹æŒ‡å®šã¯ã€çµ¶å¯¾URLã§ã‚‚ <code>/</code> <code>./</code> <code>../</code> ã§å§‹ã¾ã‚‹ç›¸å¯¾URLãƒ‘ã‚¹ã§ã‚‚å¯èƒ½</li>
      </ul>

      <section>
        <h3>HTML</h3>
        <pre><code class="language-html">
          &lt;script type="importmap"&gt;
            {
              "imports": {
                "square": "/js-tips/importmap/modules/square.js",
                "circle": "/js-tips/importmap/modules/circle.js"
              }
            }
          &lt;/script&gt;

          &lt;script&gt;
            import { appendSquare } from 'square';
            import { appendCircle } from 'circle';

            appendSquare('#result_01');
            appendCircle('#result_01');
          &lt;/script&gt;
        </code></pre>
      </section>

      <section>
        <h3>å®Ÿè¡Œçµæœ</h3>
        <pre><div id="result_01" style="padding: 8px;"></div></pre>
        <script type="importmap">
          {
            "imports": {
              "square": "/js-tips/importmap/modules/square.js",
              "circle": "/js-tips/importmap/modules/circle.js"
            }
          }
        </script>
        <script type="module">
          // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«èª­ã¿è¾¼ã¿
          import { appendSquare } from 'square';
          import { appendCircle } from 'circle';
          // å®Ÿè¡Œ
          appendSquare('#result_01');
          appendCircle('#result_01');
        </script>
      </section>

    </details>
  </section>

  <br />
  <br />

  </div>

</body>
</html>